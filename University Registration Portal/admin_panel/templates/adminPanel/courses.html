<!-- courses.html -->
{% extends "adminPanel/base.html" %}
{% block content %}
<h1 class="text-3xl font-bold text-indigo-900 mb-6">Manage Courses</h1>

<form method="post" class="bg-white/90 p-6 rounded-xl shadow-md mb-6 grid grid-cols-1 md:grid-cols-6 gap-4">
  {% csrf_token %}
  <input type="text" name="code" placeholder="Course Code"
         class="px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
  <input type="text" name="title" placeholder="Course Title"
         class="px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">

  <select name="department_id"
          class="px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
    <option value="">Select Department</option>
    {% for d in departments %}
      <option value="{{ d.id }}">{{ d.name }} ({{ d.code }})</option>
    {% endfor %}
  </select>

  <div>
    <input list="semester_list" name="semester_label" placeholder="Select Semester"
           class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" autocomplete="off">
    <datalist id="semester_list">
      {% for s in semesters %}<option value="{{ s.label }}"></option>{% endfor %}
    </datalist>
  </div>

  <input type="number" step="0.5" min="0.5" max="6" name="credit" value="3"
         class="px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="Credit">

  <button class="bg-indigo-800 text-white px-6 py-2 rounded-lg hover:bg-indigo-700">Add Course</button>
</form>

<div class="bg-white/90 rounded-xl shadow-md overflow-hidden">
  <table class="w-full">
    <thead>
      <tr class="bg-indigo-800 text-white">
        <th class="py-3 px-4 text-left">Code</th>
        <th class="py-3 px-4 text-left">Title</th>
        <th class="py-3 px-4 text-left">Semester</th>
        <th class="py-3 px-4 text-left">Department</th>
        <th class="py-3 px-4 text-left">Credit</th>
        <th class="py-3 px-4 text-center">Actions</th>
      </tr>
    </thead>
    <tbody class="divide-y">
      {% for c in courses %}
      <tr class="hover:bg-slate-50">
        <td class="py-3 px-4">{{ c.code }}</td>
        <td class="py-3 px-4">{{ c.title }}</td>
        <td class="py-3 px-4">{{ c.semester_label }}</td>
        <td class="py-3 px-4">{% if c.department %}{{ c.department.name }} ({{ c.department.code }}){% else %}-{% endif %}</td>
        <td class="py-3 px-4">{{ c.credit }}</td>
        <td class="py-3 px-4 text-center">
          <a href="{% url 'course-edit' c.id %}" class="text-indigo-700 hover:underline">Edit</a>
          <span class="mx-1 text-slate-300">|</span>
          <a href="{% url 'course-delete' c.id %}" class="text-red-600 hover:underline">Delete</a>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="6" class="text-center py-4 text-slate-500">No courses yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
