{% extends "students/base.html" %}
{% block title %}Results{% endblock %}

{% block content %}
<main class="flex-1 p-6">
  <h1 class="text-2xl font-semibold text-gray-800 mb-6">ðŸ“Š Semester Results</h1>

  <form method="get" class="mb-6">
    <label for="semester" class="block text-sm font-medium text-gray-700 mb-1">Select Semester</label>
    <select id="semester" name="sem" class="w-full p-3 rounded-md border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"
            onchange="this.form.submit()">
      {% for sem in semesters %}
        <option value="{{ sem }}" {% if sem == selected_sem %}selected{% endif %}>{{ sem }}</option>
      {% endfor %}
    </select>
  </form>

  <div class="bg-white border border-gray-200 p-4 rounded-lg shadow mb-6">
    <p><strong>Student:</strong> {{ student.full_name }}</p>
    <p><strong>Department:</strong> {{ student.department }}</p>
    <p><strong>Batch:</strong> {{ student.batch }}</p>
    <p><strong>Semester:</strong> {{ selected_sem|default:student.current_semester }}</p>
    {% if selected_result %}
      <p><strong>GPA:</strong> <span class="text-indigo-600 font-bold">{{ selected_result.gpa }}</span></p>
    {% endif %}
  </div>

  <div class="bg-white border border-gray-200 p-6 rounded-xl shadow">
    <h3 class="text-lg font-semibold mb-4 text-gray-700">Subject-wise Grades</h3>
    <div class="overflow-x-auto">
      <table class="w-full border-collapse text-left">
        <thead class="bg-gray-100 text-sm text-gray-600">
          <tr>
            <th class="p-3">Course Code</th>
            <th class="p-3">Course Name</th>
            <th class="p-3">Credit</th>
            <th class="p-3">Grade</th>
            <th class="p-3">Grade Point</th>
          </tr>
        </thead>
        <tbody class="text-sm text-gray-700">
          {% for it in items %}
          <tr class="border-b">
            <td class="p-3">{{ it.course.code }}</td>
            <td class="p-3">{{ it.course.title }}</td>
            <td class="p-3">{{ it.credit }}</td>
            <td class="p-3 font-semibold">{{ it.grade }}</td>
            <td class="p-3">{{ it.grade_point }}</td>
          </tr>
          {% empty %}
          <tr><td class="p-3" colspan="5">No result items.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</main>
{% endblock %}
